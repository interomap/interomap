import{S as Ye,i as Xe,s as et,J as Ue,k as K,a as ge,l as W,m as G,c as _e,h as U,n as N,b as De,G as R,H as qe,o as rt,P as nt,T as $e,U as je,w as Be,q as Re,r as Se,K as He,g as Y,d as he,f as Fe,N as st,y as Ae,z as Te,A as Me,B as Le,v as Ie}from"../chunks/index.651f780f.js";import{c as it,g as at,a as Ke,r as We,d as ot,b as Ve,p as lt}from"../chunks/utils.ed40310f.js";var tt={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(v,s){(function(c,r){v.exports=r()})(it,function c(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},g=!r.document&&!!r.postMessage,k=r.IS_PAPA_WORKER||!1,y={},O=0,l={parse:function(t,e){var n=(e=e||{}).dynamicTyping||!1;if(x(n)&&(e.dynamicTypingFunction=n,n={}),e.dynamicTyping=n,e.transform=!!x(e.transform)&&e.transform,e.worker&&l.WORKERS_SUPPORTED){var a=function(){if(!l.WORKERS_SUPPORTED)return!1;var p=(q=r.URL||r.webkitURL||null,A=c.toString(),l.BLOB_URL||(l.BLOB_URL=q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",A,")();"],{type:"text/javascript"})))),b=new r.Worker(p),q,A;return b.onmessage=oe,b.id=O++,y[b.id]=b}();return a.userStep=e.step,a.userChunk=e.chunk,a.userComplete=e.complete,a.userError=e.error,e.step=x(e.step),e.chunk=x(e.chunk),e.complete=x(e.complete),e.error=x(e.error),delete e.worker,void a.postMessage({input:t,config:e,workerId:a.id})}var u=null;return l.NODE_STREAM_INPUT,typeof t=="string"?(t=function(p){return p.charCodeAt(0)===65279?p.slice(1):p}(t),u=e.download?new Q(e):new re(e)):t.readable===!0&&x(t.read)&&x(t.on)?u=new ae(e):(r.File&&t instanceof File||t instanceof Object)&&(u=new I(e)),u.stream(t)},unparse:function(t,e){var n=!1,a=!0,u=",",p=`\r
`,b='"',q=b+b,A=!1,o=null,M=!1;(function(){if(typeof e=="object"){if(typeof e.delimiter!="string"||l.BAD_DELIMITERS.filter(function(i){return e.delimiter.indexOf(i)!==-1}).length||(u=e.delimiter),(typeof e.quotes=="boolean"||typeof e.quotes=="function"||Array.isArray(e.quotes))&&(n=e.quotes),typeof e.skipEmptyLines!="boolean"&&typeof e.skipEmptyLines!="string"||(A=e.skipEmptyLines),typeof e.newline=="string"&&(p=e.newline),typeof e.quoteChar=="string"&&(b=e.quoteChar),typeof e.header=="boolean"&&(a=e.header),Array.isArray(e.columns)){if(e.columns.length===0)throw new Error("Option columns is empty");o=e.columns}e.escapeChar!==void 0&&(q=e.escapeChar+b),(typeof e.escapeFormulae=="boolean"||e.escapeFormulae instanceof RegExp)&&(M=e.escapeFormulae instanceof RegExp?e.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var h=new RegExp(de(b),"g");if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return se(null,t,A);if(typeof t[0]=="object")return se(o||Object.keys(t[0]),t,A)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||o),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),se(t.fields||[],t.data||[],A);throw new Error("Unable to serialize unrecognized input");function se(i,_,w){var d="";typeof i=="string"&&(i=JSON.parse(i)),typeof _=="string"&&(_=JSON.parse(_));var m=Array.isArray(i)&&0<i.length,$=!Array.isArray(_[0]);if(m&&a){for(var j=0;j<i.length;j++)0<j&&(d+=u),d+=E(i[j],j);0<_.length&&(d+=p)}for(var f=0;f<_.length;f++){var S=m?i.length:_[f].length,L=!1,z=m?Object.keys(_[f]).length===0:_[f].length===0;if(w&&!m&&(L=w==="greedy"?_[f].join("").trim()==="":_[f].length===1&&_[f][0].length===0),w==="greedy"&&m){for(var F=[],J=0;J<S;J++){var P=$?i[J]:J;F.push(_[f][P])}L=F.join("").trim()===""}if(!L){for(var D=0;D<S;D++){0<D&&!z&&(d+=u);var ie=m&&$?i[D]:D;d+=E(_[f][ie],D)}f<_.length-1&&(!w||0<S&&!z)&&(d+=p)}}return d}function E(i,_){if(i==null)return"";if(i.constructor===Date)return JSON.stringify(i).slice(1,25);var w=!1;M&&typeof i=="string"&&M.test(i)&&(i="'"+i,w=!0);var d=i.toString().replace(h,q);return(w=w||n===!0||typeof n=="function"&&n(i,_)||Array.isArray(n)&&n[_]||function(m,$){for(var j=0;j<$.length;j++)if(-1<m.indexOf($[j]))return!0;return!1}(d,l.BAD_DELIMITERS)||-1<d.indexOf(u)||d.charAt(0)===" "||d.charAt(d.length-1)===" ")?b+d+b:d}}};if(l.RECORD_SEP=String.fromCharCode(30),l.UNIT_SEP=String.fromCharCode(31),l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!g&&!!r.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=me,l.ParserHandle=ke,l.NetworkStreamer=Q,l.FileStreamer=I,l.StringStreamer=re,l.ReadableStreamStreamer=ae,r.jQuery){var X=r.jQuery;X.fn.parse=function(t){var e=t.config||{},n=[];return this.each(function(p){if(!(X(this).prop("tagName").toUpperCase()==="INPUT"&&X(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var b=0;b<this.files.length;b++)n.push({file:this.files[b],inputElem:this,instanceConfig:X.extend({},e)})}),a(),this;function a(){if(n.length!==0){var p,b,q,A,o=n[0];if(x(t.before)){var M=t.before(o.file,o.inputElem);if(typeof M=="object"){if(M.action==="abort")return p="AbortError",b=o.file,q=o.inputElem,A=M.reason,void(x(t.error)&&t.error({name:p},b,q,A));if(M.action==="skip")return void u();typeof M.config=="object"&&(o.instanceConfig=X.extend(o.instanceConfig,M.config))}else if(M==="skip")return void u()}var h=o.instanceConfig.complete;o.instanceConfig.complete=function(se){x(h)&&h(se,o.file,o.inputElem),u()},l.parse(o.file,o.instanceConfig)}else x(t.complete)&&t.complete()}function u(){n.splice(0,1),a()}}}function V(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(e){var n=ne(e);n.chunkSize=parseInt(n.chunkSize),e.step||e.chunk||(n.chunkSize=null),this._handle=new ke(n),(this._handle.streamer=this)._config=n}.call(this,t),this.parseChunk=function(e,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var a=this._config.beforeFirstChunk(e);a!==void 0&&(e=a)}this.isFirstChunk=!1,this._halted=!1;var u=this._partialLine+e;this._partialLine="";var p=this._handle.parse(u,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var b=p.meta.cursor;this._finished||(this._partialLine=u.substring(b-this._baseIndex),this._baseIndex=b),p&&p.data&&(this._rowCount+=p.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(k)r.postMessage({results:p,workerId:l.WORKER_ID,finished:q});else if(x(this._config.chunk)&&!n){if(this._config.chunk(p,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);p=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(p.data),this._completeResults.errors=this._completeResults.errors.concat(p.errors),this._completeResults.meta=p.meta),this._completed||!q||!x(this._config.complete)||p&&p.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||p&&p.meta.paused||this._nextChunk(),p}this._halted=!0},this._sendError=function(e){x(this._config.error)?this._config.error(e):k&&this._config.error&&r.postMessage({workerId:l.WORKER_ID,error:e,finished:!1})}}function Q(t){var e;(t=t||{}).chunkSize||(t.chunkSize=l.RemoteChunkSize),V.call(this,t),this._nextChunk=g?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(n){this._input=n,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),g||(e.onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!g),this._config.downloadRequestHeaders){var n=this._config.downloadRequestHeaders;for(var a in n)e.setRequestHeader(a,n[a])}if(this._config.chunkSize){var u=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+u)}try{e.send(this._config.downloadRequestBody)}catch(p){this._chunkError(p.message)}g&&e.status===0&&this._chunkError()}},this._chunkLoaded=function(){e.readyState===4&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(n){var a=n.getResponseHeader("Content-Range");return a===null?-1:parseInt(a.substring(a.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(n){var a=e.statusText||n;this._sendError(new Error(a))}}function I(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=l.LocalChunkSize),V.call(this,t);var a=typeof FileReader<"u";this.stream=function(u){this._input=u,n=u.slice||u.webkitSlice||u.mozSlice,a?((e=new FileReader).onload=ee(this._chunkLoaded,this),e.onerror=ee(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var u=this._input;if(this._config.chunkSize){var p=Math.min(this._start+this._config.chunkSize,this._input.size);u=n.call(u,this._start,p)}var b=e.readAsText(u,this._config.encoding);a||this._chunkLoaded({target:{result:b}})},this._chunkLoaded=function(u){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(u.target.result)},this._chunkError=function(){this._sendError(e.error)}}function re(t){var e;V.call(this,t=t||{}),this.stream=function(n){return e=n,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var n,a=this._config.chunkSize;return a?(n=e.substring(0,a),e=e.substring(a)):(n=e,e=""),this._finished=!e,this.parseChunk(n)}}}function ae(t){V.call(this,t=t||{});var e=[],n=!0,a=!1;this.pause=function(){V.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){V.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(u){this._input=u,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){a&&e.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=ee(function(u){try{e.push(typeof u=="string"?u:u.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(p){this._streamError(p)}},this),this._streamError=ee(function(u){this._streamCleanUp(),this._sendError(u)},this),this._streamEnd=ee(function(){this._streamCleanUp(),a=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ke(t){var e,n,a,u=Math.pow(2,53),p=-u,b=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,A=this,o=0,M=0,h=!1,se=!1,E=[],i={data:[],errors:[],meta:{}};if(x(t.step)){var _=t.step;t.step=function(f){if(i=f,m())d();else{if(d(),i.data.length===0)return;o+=f.data.length,t.preview&&o>t.preview?n.abort():(i.data=i.data[0],_(i,A))}}}function w(f){return t.skipEmptyLines==="greedy"?f.join("").trim()==="":f.length===1&&f[0].length===0}function d(){return i&&a&&(j("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),a=!1),t.skipEmptyLines&&(i.data=i.data.filter(function(f){return!w(f)})),m()&&function(){if(!i)return;function f(L,z){x(t.transformHeader)&&(L=t.transformHeader(L,z)),E.push(L)}if(Array.isArray(i.data[0])){for(var S=0;m()&&S<i.data.length;S++)i.data[S].forEach(f);i.data.splice(0,1)}else i.data.forEach(f)}(),function(){if(!i||!t.header&&!t.dynamicTyping&&!t.transform)return i;function f(L,z){var F,J=t.header?{}:[];for(F=0;F<L.length;F++){var P=F,D=L[F];t.header&&(P=F>=E.length?"__parsed_extra":E[F]),t.transform&&(D=t.transform(D,P)),D=$(P,D),P==="__parsed_extra"?(J[P]=J[P]||[],J[P].push(D)):J[P]=D}return t.header&&(F>E.length?j("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+F,M+z):F<E.length&&j("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+F,M+z)),J}var S=1;return!i.data.length||Array.isArray(i.data[0])?(i.data=i.data.map(f),S=i.data.length):i.data=f(i.data,0),t.header&&i.meta&&(i.meta.fields=E),M+=S,i}()}function m(){return t.header&&E.length===0}function $(f,S){return L=f,t.dynamicTypingFunction&&t.dynamicTyping[L]===void 0&&(t.dynamicTyping[L]=t.dynamicTypingFunction(L)),(t.dynamicTyping[L]||t.dynamicTyping)===!0?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&(function(z){if(b.test(z)){var F=parseFloat(z);if(p<F&&F<u)return!0}return!1}(S)?parseFloat(S):q.test(S)?new Date(S):S===""?null:S):S;var L}function j(f,S,L,z){var F={type:f,code:S,message:L};z!==void 0&&(F.row=z),i.errors.push(F)}this.parse=function(f,S,L){var z=t.quoteChar||'"';if(t.newline||(t.newline=function(P,D){P=P.substring(0,1048576);var ie=new RegExp(de(D)+"([^]*?)"+de(D),"gm"),Z=(P=P.replace(ie,"")).split("\r"),le=P.split(`
`),ue=1<le.length&&le[0].length<Z[0].length;if(Z.length===1||ue)return`
`;for(var te=0,B=0;B<Z.length;B++)Z[B][0]===`
`&&te++;return te>=Z.length/2?`\r
`:"\r"}(f,z)),a=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(f),i.meta.delimiter=t.delimiter);else{var F=function(P,D,ie,Z,le){var ue,te,B,H;le=le||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var we=0;we<le.length;we++){var T=le[we],xe=0,ve=0,Ce=0;B=void 0;for(var be=new me({comments:Z,delimiter:T,newline:D,preview:10}).parse(P),ye=0;ye<be.data.length;ye++)if(ie&&w(be.data[ye]))Ce++;else{var Ee=be.data[ye].length;ve+=Ee,B!==void 0?0<Ee&&(xe+=Math.abs(Ee-B),B=Ee):B=Ee}0<be.data.length&&(ve/=be.data.length-Ce),(te===void 0||xe<=te)&&(H===void 0||H<ve)&&1.99<ve&&(te=xe,ue=T,H=ve)}return{successful:!!(t.delimiter=ue),bestDelimiter:ue}}(f,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);F.successful?t.delimiter=F.bestDelimiter:(a=!0,t.delimiter=l.DefaultDelimiter),i.meta.delimiter=t.delimiter}var J=ne(t);return t.preview&&t.header&&J.preview++,e=f,n=new me(J),i=n.parse(e,S,L),d(),h?{meta:{paused:!0}}:i||{meta:{paused:!1}}},this.paused=function(){return h},this.pause=function(){h=!0,n.abort(),e=x(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){A.streamer._halted?(h=!1,A.streamer.parseChunk(e,!0)):setTimeout(A.resume,3)},this.aborted=function(){return se},this.abort=function(){se=!0,n.abort(),i.meta.aborted=!0,x(t.complete)&&t.complete(i),e=""}}function de(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function me(t){var e,n=(t=t||{}).delimiter,a=t.newline,u=t.comments,p=t.step,b=t.preview,q=t.fastMode,A=e=t.quoteChar===void 0||t.quoteChar===null?'"':t.quoteChar;if(t.escapeChar!==void 0&&(A=t.escapeChar),(typeof n!="string"||-1<l.BAD_DELIMITERS.indexOf(n))&&(n=","),u===n)throw new Error("Comment character same as delimiter");u===!0?u="#":(typeof u!="string"||-1<l.BAD_DELIMITERS.indexOf(u))&&(u=!1),a!==`
`&&a!=="\r"&&a!==`\r
`&&(a=`
`);var o=0,M=!1;this.parse=function(h,se,E){if(typeof h!="string")throw new Error("Input must be a string");var i=h.length,_=n.length,w=a.length,d=u.length,m=x(p),$=[],j=[],f=[],S=o=0;if(!h)return ce();if(t.header&&!se){var L=h.split(a)[0].split(n),z=[],F={},J=!1;for(var P in L){var D=L[P];x(t.transformHeader)&&(D=t.transformHeader(D,P));var ie=D,Z=F[D]||0;for(0<Z&&(J=!0,ie=D+"_"+Z),F[D]=Z+1;z.includes(ie);)ie=ie+"_"+Z;z.push(ie)}if(J){var le=h.split(a);le[0]=z.join(n),h=le.join(a)}}if(q||q!==!1&&h.indexOf(e)===-1){for(var ue=h.split(a),te=0;te<ue.length;te++){if(f=ue[te],o+=f.length,te!==ue.length-1)o+=a.length;else if(E)return ce();if(!u||f.substring(0,d)!==u){if(m){if($=[],Ce(f.split(n)),Oe(),M)return ce()}else Ce(f.split(n));if(b&&b<=te)return $=$.slice(0,b),ce(!0)}}return ce()}for(var B=h.indexOf(n,o),H=h.indexOf(a,o),we=new RegExp(de(A)+de(e),"g"),T=h.indexOf(e,o);;)if(h[o]!==e)if(u&&f.length===0&&h.substring(o,o+d)===u){if(H===-1)return ce();o=H+w,H=h.indexOf(a,o),B=h.indexOf(n,o)}else if(B!==-1&&(B<H||H===-1))f.push(h.substring(o,B)),o=B+_,B=h.indexOf(n,o);else{if(H===-1)break;if(f.push(h.substring(o,H)),Ee(H+w),m&&(Oe(),M))return ce();if(b&&$.length>=b)return ce(!0)}else for(T=o,o++;;){if((T=h.indexOf(e,T+1))===-1)return E||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:$.length,index:o}),ye();if(T===i-1)return ye(h.substring(o,T).replace(we,e));if(e!==A||h[T+1]!==A){if(e===A||T===0||h[T-1]!==A){B!==-1&&B<T+1&&(B=h.indexOf(n,T+1)),H!==-1&&H<T+1&&(H=h.indexOf(a,T+1));var xe=be(H===-1?B:Math.min(B,H));if(h.substr(T+1+xe,_)===n){f.push(h.substring(o,T).replace(we,e)),h[o=T+1+xe+_]!==e&&(T=h.indexOf(e,o)),B=h.indexOf(n,o),H=h.indexOf(a,o);break}var ve=be(H);if(h.substring(T+1+ve,T+1+ve+w)===a){if(f.push(h.substring(o,T).replace(we,e)),Ee(T+1+ve+w),B=h.indexOf(n,o),T=h.indexOf(e,o),m&&(Oe(),M))return ce();if(b&&$.length>=b)return ce(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:$.length,index:o}),T++}}else T++}return ye();function Ce(fe){$.push(fe),S=o}function be(fe){var Ne=0;if(fe!==-1){var ze=h.substring(T+1,fe);ze&&ze.trim()===""&&(Ne=ze.length)}return Ne}function ye(fe){return E||(fe===void 0&&(fe=h.substring(o)),f.push(fe),o=i,Ce(f),m&&Oe()),ce()}function Ee(fe){o=fe,Ce(f),f=[],H=h.indexOf(a,o)}function ce(fe){return{data:$,errors:j,meta:{delimiter:n,linebreak:a,aborted:M,truncated:!!fe,cursor:S+(se||0)}}}function Oe(){p(ce()),$=[],j=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return o}}function oe(t){var e=t.data,n=y[e.workerId],a=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var u={abort:function(){a=!0,pe(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:C,resume:C};if(x(n.userStep)){for(var p=0;p<e.results.data.length&&(n.userStep({data:e.results.data[p],errors:e.results.errors,meta:e.results.meta},u),!a);p++);delete e.results}else x(n.userChunk)&&(n.userChunk(e.results,u,e.file),delete e.results)}e.finished&&!a&&pe(e.workerId,e.results)}function pe(t,e){var n=y[t];x(n.userComplete)&&n.userComplete(e),n.terminate(),delete y[t]}function C(){throw new Error("Not implemented.")}function ne(t){if(typeof t!="object"||t===null)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=ne(t[n]);return e}function ee(t,e){return function(){t.apply(e,arguments)}}function x(t){return typeof t=="function"}return k&&(r.onmessage=function(t){var e=t.data;if(l.WORKER_ID===void 0&&e&&(l.WORKER_ID=e.workerId),typeof e.input=="string")r.postMessage({workerId:l.WORKER_ID,results:l.parse(e.input,e.config),finished:!0});else if(r.File&&e.input instanceof File||e.input instanceof Object){var n=l.parse(e.input,e.config);n&&r.postMessage({workerId:l.WORKER_ID,results:n,finished:!0})}}),(Q.prototype=Object.create(V.prototype)).constructor=Q,(I.prototype=Object.create(V.prototype)).constructor=I,(re.prototype=Object.create(re.prototype)).constructor=re,(ae.prototype=Object.create(V.prototype)).constructor=ae,l})})(tt);var ut=tt.exports;const ct=at(ut);function ft(v){let s,c,r,g,k;return{c(){s=K("div"),c=K("img"),r=ge(),g=K("canvas"),this.h()},l(y){s=W(y,"DIV",{class:!0});var O=G(s);c=W(O,"IMG",{class:!0}),r=_e(O),g=W(O,"CANVAS",{class:!0}),G(g).forEach(U),O.forEach(U),this.h()},h(){N(c,"class","absolute left-1/2 -translate-x-1/2 h-full object-contain"),N(g,"class","z-10 absolute left-1/2 -translate-x-1/2 h-full"),N(s,"class",k=(v[2].class??"")+" relative")},m(y,O){De(y,s,O),R(s,c),v[5](c),R(s,r),R(s,g),v[6](g)},p(y,[O]){O&4&&k!==(k=(y[2].class??"")+" relative")&&N(s,"class",k)},i:qe,o:qe,d(y){y&&U(s),v[5](null),v[6](null)}}}function ht(v,s,c){const r=[],g=v.getImageData(0,0,s,c).data;for(let k=3,y=g.length;k<y;k+=4)if(g[k]>0){const O=Math.floor(k/4%s),l=Math.floor(k/4/s);r.push([O,l])}return r}function dt(v,s,c){let{persona:r}=s,{participantsStrokes:g}=s,k,y,O,l=0,X=0,V=1,Q=lt[r],I;rt(()=>{if(Q==null){Ke(`Error: Persona SVG path of ${r} was not found.`);return}re(),c(1,I.onload=ae,I),c(1,I.src=Q,I),k=new ResizeObserver(me),k.observe(y)}),nt(()=>{y&&k.unobserve(y)});function re(){const C=y.getContext("2d");if(C==null){Ke(`Error: Could not get context of canvas for ${r}.`);return}O=C}function ae(){const C=I.getBoundingClientRect();We(C.width,C.height,y,O),ke(C.width,C.height),l=C.width,X=C.height,V=C.width/I.width,console.log(r);const ne=de(g);console.log(ne)}function ke(C,ne){ot(I,O,C,ne,!0),I.classList.add("hidden")}function de(C){const ne=[];for(let ee of C){const x=document.createElement("canvas"),t=x.getContext("2d");if(t==null)throw"Error: Could not get canvas context while getting drawn pixels.";We(l,X,x,t),Ve(ee,t,V),Ve(ee,O,V),ne.push(ht(t,l,X))}return ne}function me(){y.getBoundingClientRect()}function oe(C){Be[C?"unshift":"push"](()=>{I=C,c(1,I)})}function pe(C){Be[C?"unshift":"push"](()=>{y=C,c(0,y)})}return v.$$set=C=>{c(2,s=$e($e({},s),je(C))),"persona"in C&&c(3,r=C.persona),"participantsStrokes"in C&&c(4,g=C.participantsStrokes)},s=je(s),[y,I,s,r,g,oe,pe]}class Pe extends Ye{constructor(s){super(),Xe(this,s,dt,ft,et,{persona:3,participantsStrokes:4})}get persona(){return this.$$.ctx[3]}set persona(s){this.$$set({persona:s}),Ue()}get participantsStrokes(){return this.$$.ctx[4]}set participantsStrokes(s){this.$$set({participantsStrokes:s}),Ue()}}function Je(v){let s,c;return s=new Pe({props:{class:"flex-grow",persona:"FemaleFront",participantsStrokes:v[2].FemaleFront}}),{c(){Ae(s.$$.fragment)},l(r){Te(s.$$.fragment,r)},m(r,g){Me(s,r,g),c=!0},p(r,g){const k={};g&4&&(k.participantsStrokes=r[2].FemaleFront),s.$set(k)},i(r){c||(Y(s.$$.fragment,r),c=!0)},o(r){he(s.$$.fragment,r),c=!1},d(r){Le(s,r)}}}function Qe(v){let s,c;return s=new Pe({props:{class:"flex-grow",persona:"FemaleBack",participantsStrokes:v[2].FemaleBack}}),{c(){Ae(s.$$.fragment)},l(r){Te(s.$$.fragment,r)},m(r,g){Me(s,r,g),c=!0},p(r,g){const k={};g&4&&(k.participantsStrokes=r[2].FemaleBack),s.$set(k)},i(r){c||(Y(s.$$.fragment,r),c=!0)},o(r){he(s.$$.fragment,r),c=!1},d(r){Le(s,r)}}}function Ge(v){let s,c;return s=new Pe({props:{class:"flex-grow",persona:"MaleFront",participantsStrokes:v[2].MaleFront}}),{c(){Ae(s.$$.fragment)},l(r){Te(s.$$.fragment,r)},m(r,g){Me(s,r,g),c=!0},p(r,g){const k={};g&4&&(k.participantsStrokes=r[2].MaleFront),s.$set(k)},i(r){c||(Y(s.$$.fragment,r),c=!0)},o(r){he(s.$$.fragment,r),c=!1},d(r){Le(s,r)}}}function Ze(v){let s,c;return s=new Pe({props:{class:"flex-grow",persona:"MaleBack",participantsStrokes:v[2].MaleBack}}),{c(){Ae(s.$$.fragment)},l(r){Te(s.$$.fragment,r)},m(r,g){Me(s,r,g),c=!0},p(r,g){const k={};g&4&&(k.participantsStrokes=r[2].MaleBack),s.$set(k)},i(r){c||(Y(s.$$.fragment,r),c=!0)},o(r){he(s.$$.fragment,r),c=!1},d(r){Le(s,r)}}}function pt(v){let s,c,r,g,k,y,O,l,X,V,Q,I,re,ae,ke,de,me,oe,pe,C,ne,ee,x,t,e,n,a,u,p,b,q,A,o,M,h,se,E=v[1].length>0&&Je(v),i=v[1].length>0&&Qe(v),_=v[1].length>0&&Ge(v),w=v[1].length>0&&Ze(v);return{c(){s=K("section"),c=K("header"),r=K("button"),g=Re("Load data"),k=ge(),y=K("div"),O=K("div"),l=K("span"),X=Re("Female Front"),V=ge(),E&&E.c(),Q=ge(),I=K("div"),re=K("div"),ae=K("span"),ke=Re("Female Back"),de=ge(),i&&i.c(),me=ge(),oe=K("div"),pe=K("div"),C=K("span"),ne=Re("Male Front"),ee=ge(),_&&_.c(),x=ge(),t=K("div"),e=K("div"),n=K("span"),a=Re("Male Back"),u=ge(),w&&w.c(),p=ge(),b=K("aside"),q=Re("aside"),A=ge(),o=K("input"),this.h()},l(d){s=W(d,"SECTION",{class:!0});var m=G(s);c=W(m,"HEADER",{class:!0});var $=G(c);r=W($,"BUTTON",{class:!0});var j=G(r);g=Se(j,"Load data"),j.forEach(U),$.forEach(U),k=_e(m),y=W(m,"DIV",{class:!0});var f=G(y);O=W(f,"DIV",{class:!0});var S=G(O);l=W(S,"SPAN",{class:!0});var L=G(l);X=Se(L,"Female Front"),L.forEach(U),S.forEach(U),V=_e(f),E&&E.l(f),f.forEach(U),Q=_e(m),I=W(m,"DIV",{class:!0});var z=G(I);re=W(z,"DIV",{class:!0});var F=G(re);ae=W(F,"SPAN",{class:!0});var J=G(ae);ke=Se(J,"Female Back"),J.forEach(U),F.forEach(U),de=_e(z),i&&i.l(z),z.forEach(U),me=_e(m),oe=W(m,"DIV",{class:!0});var P=G(oe);pe=W(P,"DIV",{class:!0});var D=G(pe);C=W(D,"SPAN",{class:!0});var ie=G(C);ne=Se(ie,"Male Front"),ie.forEach(U),D.forEach(U),ee=_e(P),_&&_.l(P),P.forEach(U),x=_e(m),t=W(m,"DIV",{class:!0});var Z=G(t);e=W(Z,"DIV",{class:!0});var le=G(e);n=W(le,"SPAN",{class:!0});var ue=G(n);a=Se(ue,"Male Back"),ue.forEach(U),le.forEach(U),u=_e(Z),w&&w.l(Z),Z.forEach(U),p=_e(m),b=W(m,"ASIDE",{class:!0});var te=G(b);q=Se(te,"aside"),te.forEach(U),m.forEach(U),A=_e(d),o=W(d,"INPUT",{type:!0,class:!0,accept:!0}),this.h()},h(){N(r,"class","h-full px-2 hover:bg-neutral-700 text-neutral-100 text-xs hover:underline"),N(c,"class","z-10 col-start-1 col-end-4 flex items-center bg-neutral-600 border-b border-neutral-800 panel-shadow svelte-o7nck0"),N(l,"class","panel-tab active svelte-o7nck0"),N(O,"class","w-full h-5 panel-tabs svelte-o7nck0"),N(y,"class","flex flex-col border-r border-b border-neutral-300"),N(ae,"class","panel-tab svelte-o7nck0"),N(re,"class","w-full h-5 panel-tabs svelte-o7nck0"),N(I,"class","flex flex-col border-b border-neutral-300"),N(C,"class","panel-tab svelte-o7nck0"),N(pe,"class","w-full h-5 panel-tabs svelte-o7nck0"),N(oe,"class","flex flex-col border-r border-neutral-300"),N(n,"class","panel-tab svelte-o7nck0"),N(e,"class","w-full h-5 panel-tabs svelte-o7nck0"),N(t,"class","flex flex-col"),N(b,"class","col-start-3 col-end-4 row-start-2 row-end-4 bg-neutral-600"),N(s,"class","grid workspace w-screen h-screen svelte-o7nck0"),N(o,"type","file"),N(o,"class","hidden"),N(o,"accept",".csv")},m(d,m){De(d,s,m),R(s,c),R(c,r),R(r,g),R(s,k),R(s,y),R(y,O),R(O,l),R(l,X),R(y,V),E&&E.m(y,null),R(s,Q),R(s,I),R(I,re),R(re,ae),R(ae,ke),R(I,de),i&&i.m(I,null),R(s,me),R(s,oe),R(oe,pe),R(pe,C),R(C,ne),R(oe,ee),_&&_.m(oe,null),R(s,x),R(s,t),R(t,e),R(e,n),R(n,a),R(t,u),w&&w.m(t,null),R(s,p),R(s,b),R(b,q),De(d,A,m),De(d,o,m),v[5](o),M=!0,h||(se=[He(r,"click",v[3]),He(o,"change",v[4])],h=!0)},p(d,[m]){d[1].length>0?E?(E.p(d,m),m&2&&Y(E,1)):(E=Je(d),E.c(),Y(E,1),E.m(y,null)):E&&(Ie(),he(E,1,1,()=>{E=null}),Fe()),d[1].length>0?i?(i.p(d,m),m&2&&Y(i,1)):(i=Qe(d),i.c(),Y(i,1),i.m(I,null)):i&&(Ie(),he(i,1,1,()=>{i=null}),Fe()),d[1].length>0?_?(_.p(d,m),m&2&&Y(_,1)):(_=Ge(d),_.c(),Y(_,1),_.m(oe,null)):_&&(Ie(),he(_,1,1,()=>{_=null}),Fe()),d[1].length>0?w?(w.p(d,m),m&2&&Y(w,1)):(w=Ze(d),w.c(),Y(w,1),w.m(t,null)):w&&(Ie(),he(w,1,1,()=>{w=null}),Fe())},i(d){M||(Y(E),Y(i),Y(_),Y(w),M=!0)},o(d){he(E),he(i),he(_),he(w),M=!1},d(d){d&&U(s),E&&E.d(),i&&i.d(),_&&_.d(),w&&w.d(),d&&U(A),d&&U(o),v[5](null),h=!1,st(se)}}}function gt(v){const s=[];for(let c of v)if("interoMapPoints"in c){const r=_t(c.interoMapPoints);s.push(r)}return s}function _t(v){return JSON.parse(v)}function mt(v){const s=[],c={MaleFront:[],MaleBack:[],FemaleFront:[],FemaleBack:[]};for(let r=0,g=v.length;r<g;++r){const k=v[r],y=Object.keys(k);s.push({id:r+1,surveyData:k});for(let O of y){const l=k[O];l&&l.length>0&&c[O].push(l)}}return[s,c]}function vt(v,s,c){let r,g=[],k={MaleFront:[],MaleBack:[],FemaleFront:[],FemaleBack:[]};function y(){r.click()}function O(){r.files&&r.files.length>0&&l(r.files[0])}function l(Q){ct.parse(Q,{worker:!0,header:!0,complete:X})}function X(Q){const I=gt(Q.data);c(1,[g,k]=mt(I),g,c(2,k))}function V(Q){Be[Q?"unshift":"push"](()=>{r=Q,c(0,r)})}return[r,g,k,y,O,V]}class yt extends Ye{constructor(s){super(),Xe(this,s,vt,pt,et,{})}}export{yt as default};
